<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Lector de documento</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="lector.css" />
</head>

<body class="lector-body">

  <!-- ======================= BARRA SUPERIOR ======================= -->
  <header class="top-bar">
    <div class="top-bar-left">
      <button class="icon-button" id="btn-back">←</button>

      <div class="doc-info">
        <h1 class="doc-title" id="doc-title">Documento</h1>
        <p class="doc-subtitle">
          <span id="doc-page-current">Página 1</span>
        </p>
      </div>
    </div>

    <div class="top-bar-right">
      <!-- BOTÓN PARA ENCENDER LA CÁMARA -->
      <button class="camera-indicator" id="camera-toggle">
        <span id="camera-status-text">Apagado</span>
        <span class="camera-dot" id="camera-dot"></span>
      </button>

      <button class="mode-toggle" id="btn-mode-toggle">Modo lectura</button>
      <button class="mode-toggle" id="btn-stop-reading">Detener lectura</button>
      <button class="mode-toggle" id="btn-read-pdf">Leer documento</button>
      <button class="mode-toggle" id="btn-voice">Hablar</button>



      <div class="options-menu-wrapper">
        <button class="icon-button" id="btn-options">⋮</button>
        <div class="options-menu" id="options-menu">
          <button class="options-item" data-action="download">Descargar</button>
          <button class="options-item" data-action="index">Ver índice</button>
          <button class="options-item" data-action="search">Buscar texto</button>
          <button class="options-item" data-action="settings">Ajustes de lectura</button>
        </div>
      </div>
    </div>
  </header>

  <!-- ======================= ICONOS RÁPIDOS ======================= -->
  <div class="quick-actions">
    <button class="quick-action" id="btn-download">
      <img src="../../assets/icons/btn-descargar.png" class="quick-action-icon" />
      <span>Descargar</span>
    </button>

    <button class="quick-action" id="btn-index">
      <img src="../../assets/icons/btn-indice.png" class="quick-action-icon" />
      <span>Índice</span>
    </button>

    <button class="quick-action" id="btn-search">
      <img src="../../assets/icons/btn-buscarTexto.png" class="quick-action-icon" />
      <span>Buscar</span>
    </button>

    <button class="quick-action" id="btn-settings">
      <img src="../../assets/icons/btn-ajustesLectura.png" class="quick-action-icon" />
      <span>Ajustes</span>
    </button>
  </div>

  <!-- ======================= CONTENIDO PRINCIPAL ======================= -->
  <main class="viewer-layout">
    <section class="viewer-center">
      <div class="pdf-area" id="pdf-area">
        <canvas id="pdfCanvas" class="pdf-viewer"></canvas>
      </div>

      <div class="pdf-controls">
        <button id="btn-prev-page">⬅ Anterior</button>
        <span id="pageInfo">Página 1 / 1</span>
        <button id="btn-next-page">Siguiente ➡</button>
        <button id="btn-zoom-out">Zoom −</button>
        <button id="btn-zoom-in">Zoom +</button>
      </div>
    </section>

    <!-- ======================= PANEL LATERAL ======================= -->
    <aside class="assist-panel">

      <!-- ==== Cámara (Actualizada con Canvas para Mediapipe) ==== -->
      <div class="camera-panel">
    <h3>Cámara</h3>

    <div class="camera-preview" 
         style="position: relative; width: 320px; height: 240px;">

        <video id="camera-stream" autoplay playsinline
               style="width: 100%; height: 100%; 
                      position: absolute; top: 0; left: 0; 
                      z-index: 1;"></video>

        <canvas id="hand-canvas" width="320" height="240"
                style="position: absolute; top: 0; left: 0; 
                       z-index: 2;"></canvas>

    </div>
</div>


      <div class="assist-card">
        <h2>Controles por gestos</h2>
        <ul>
          <li><strong>Swipe derecha</strong> → página anterior</li>
          <li><strong>Swipe izquierda</strong> → página siguiente</li>
          <li><strong>Pinch</strong> → zoom</li>
          <li><strong>Mano abierta</strong> → pausar lectura</li>
          <li><strong>Mano cerrada</strong> → reanudar</li>
        </ul>
      </div>

      <div class="assist-card">
        <h2>Controles por voz</h2>
        <ul>
          <li>“<strong>Ir a la página 25</strong>”</li>
          <li>“<strong>Buscar palabra interfaces</strong>”</li>
          <li>“<strong>Leer desde el inicio</strong>”</li>
          <li>“<strong>Cambiar a modo oscuro</strong>”</li>
          <li>“<strong>Zoom 120%</strong>”</li>
        </ul>
      </div>

      <div class="assist-card">
  <h2>Comandos de voz avanzados</h2>
  <ul>
    <li><strong>Navegación:</strong></li>
    <ul>
      <li>“<strong>Siguiente página</strong>”</li>
      <li>“<strong>Página anterior</strong>”</li>
      <li>“<strong>Ir a la página 12</strong>”</li>
    </ul>

    <li style="margin-top:12px;"><strong>Zoom:</strong></li>
    <ul>
      <li>“<strong>Acercar</strong>” / “<strong>Zoom más</strong>”</li>
      <li>“<strong>Alejar</strong>” / “<strong>Zoom menos</strong>”</li>
    </ul>

    <li style="margin-top:12px;"><strong>Lectura del PDF:</strong></li>
    <ul>
      <li>“<strong>Leer documento</strong>”</li>
      <li>“<strong>Iniciar lectura</strong>”</li>
      <li>“<strong>Detener lectura</strong>” / “<strong>Parar lectura</strong>”</li>
    </ul>
  </ul>
</div>


    </aside>
  </main>

  <!-- ======================= MODAL SIMPLE ======================= -->
  <div class="modal-overlay" id="simple-modal">
    <div class="modal-content">
      <h2 id="modal-title">Acción</h2>
      <p id="modal-message"></p>
      <button class="modal-close" id="modal-close">Cerrar</button>
    </div>
  </div>

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

  <!-- MediaPipe Hands + dependencias -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

  <!-- Archivo principal -->
  <script src="lector.js"></script>

</body>
</html>
